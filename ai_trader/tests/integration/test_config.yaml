# Test configuration for integration tests
environment: test

# Test database configuration
database:
  host: localhost
  port: 5432
  name: ai_trader_test
  user: test_user
  password: test_pass
  pool_size: 5
  max_overflow: 5
  echo: false

# Test cache configuration
cache:
  backend: redis
  redis:
    host: localhost
    port: 6379
    db: 1  # Use different DB for tests
    decode_responses: true
  ttl_seconds: 300
  max_size: 1000

# Test API endpoints
api_endpoints:
  alpaca:
    base_url: https://paper-api.alpaca.markets
    data_url: https://data.alpaca.markets
  polygon:
    base_url: https://api.polygon.io

# Test API keys (use environment variables in CI)
api_keys:
  alpaca:
    api_key: ${TEST_ALPACA_API_KEY:test_api_key}
    secret_key: ${TEST_ALPACA_SECRET_KEY:test_secret_key}
  polygon:
    api_key: ${TEST_POLYGON_API_KEY:test_polygon_key}

# Reduced limits for testing
rate_limits:
  alpaca:
    requests_per_minute: 10
    burst_size: 5
  polygon:
    requests_per_minute: 5
    burst_size: 3

# Scanner test configuration
scanners:
  max_workers: 2
  timeout_seconds: 30
  max_symbols_per_scan: 10
  batch_size: 5

# Feature calculation test configuration
features:
  calculation_timeout: 60
  max_workers: 2
  cache_results: true

# Risk management test configuration
risk_management:
  max_position_size: 0.1
  max_portfolio_risk: 0.2
  stop_loss_percent: 0.03
  max_daily_trades: 10

# Trading test configuration
trading:
  paper_trading: true
  enable_shorts: false
  max_orders_per_symbol: 3
  order_timeout_seconds: 30

# Monitoring test configuration
monitoring:
  metrics_enabled: true
  metrics_port: 9091  # Different port for tests
  log_level: DEBUG

# Test feature flags
feature_flags:
  debug_mode: true
  enable_paper_trading: true
  enable_backtesting: true
  enable_real_trading: false
  enable_experimental_features: false

# Test logging configuration
logging:
  level: DEBUG
  format: json
  log_to_file: false
  structured_logging: true