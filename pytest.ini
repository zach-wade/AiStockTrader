[pytest]
# Pytest configuration for AI Trading System

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test directories
testpaths = tests

# Output options
addopts =
    --strict-markers
    --tb=short
    --disable-warnings
    -ra

# Coverage options
# Use --cov=src --cov-report=term-missing --cov-report=xml for coverage

# Markers for test tiers
markers =
    tier1: Quick validation tests (< 2 minutes) - Core functionality
    tier2: Progressive tests (< 5 minutes) - Working components
    tier3: Full test suite (all tests) - Including known failures

    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
    smoke: Smoke tests for critical paths

    stable: Tests that consistently pass (use for CI)
    unstable: Tests that are currently failing or flaky
    known_failure: Tests with known failures that are documented
    requires_fix: Tests that need code fixes before they can pass

    slow: Tests that take > 10 seconds
    paper_trading: Paper trading related tests
    market_data: Market data related tests
    security: Security related tests

    performance: Performance benchmarking tests
    redis: Tests requiring Redis infrastructure

    skip_ci: Skip in CI environment
    ci_only: Run only in CI environment

# Test timeout (seconds)
timeout = 300

# Asyncio configuration
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Disable cache warnings
cache_dir = .pytest_cache

# Parallel execution (when using pytest-xdist)
# Use: pytest -n auto for parallel execution
